(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[41],{590:function(e,t,a){"use strict";a.r(t);a(445);var s=a(446),n=a.n(s),i=(a(414),a(415)),l=a.n(i),r=(a(391),a(392)),c=a.n(r),o=a(52),d=a(53),u=a(55),h=a(54),m=a(1),p=a.n(m),f=a(118),v=a(7),b=a(382),k=a(385),C=a(388),E=a(447),y=a.n(E),g=a(448),O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(o.a)(this,a),s=t.call(this,e),Object(k.d)(e),s.state={defaultProvince:"",sProvince:"",sCity:"",sArea:"",sName:"",sCellphone:"",sAddress:"",bChecked:!1},s.aid=Object(k.c)(s.props.location.search).search.aid,s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){Object(k.e)(),this.getAddress()}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"submitData",value:function(){var e=this;if(this.state.sName.match(/^\s*$/))return c.a.info("\u8bf7\u586b\u5199\u6536\u8d27\u4eba\u59d3\u540d",1.7),!1;if(this.state.sCellphone.match(/^\s*$/))return c.a.info("\u8bf7\u586b\u5199\u6536\u8d27\u4eba\u624b\u673a\u53f7",1.7),!1;if(!this.state.sCellphone.match(/^1[0-9][0-9]{9}$/))return c.a.info("\u60a8\u8f93\u5165\u7684\u624b\u673a\u53f7\u7801\u4e0d\u6b63\u786e",1.7),!1;if(""===this.state.defaultProvince)return c.a.info("\u8bf7\u586b\u5199\u6240\u5728\u5730\u533a",1.7),!1;if(this.state.sAddress.match(/^\s*$/))return c.a.info("\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740",1.7),!1;var t=v.a.baseUrl+"/api/user/address/mod?token="+v.a.token,a={aid:this.aid,uid:this.props.state.user.uid,name:this.state.sName,cellphone:this.state.sCellphone,province:this.state.sProvince,city:this.state.sCity,area:this.state.sArea,address:this.state.sAddress,isdefault:this.state.bChecked?"1":"0"};Object(b.a)(t,"post",a).then((function(t){e.state.bChecked&&sessionStorage.removeItem("addressId"),200===t.code&&c.a.info("\u4fee\u6539\u6210\u529f!",1.7,(function(){e.props.history.goBack()}))}))}},{key:"getAddress",value:function(){var e=this,t=v.a.baseUrl+"/api/user/address/info?uid="+this.props.state.user.uid+"&aid="+this.aid+"&token="+v.a.token;Object(b.a)(t).then((function(t){200===t.code&&e.setState({sName:t.data.name,sCellphone:t.data.cellphone,sProvince:t.data.province,sCity:t.data.city,sArea:t.data.area,sAddress:t.data.address,bChecked:"1"===t.data.isdefault,defaultProvince:"".concat(t.data.province," ").concat(t.data.city," ").concat(t.data.area)})}))}},{key:"delData",value:function(){var e=this;l.a.alert("","\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",[{text:"\u53d6\u6d88",onPress:function(){},style:"default"},{text:"\u786e\u8ba4",onPress:function(){var t=v.a.baseUrl+"/api/user/address/del?uid="+e.props.state.user.uid+"&aid="+e.aid+"&token="+v.a.token;Object(b.a)(t).then((function(t){200===t.code&&(200===t.code&&(e.aid===sessionStorage.addressId&&sessionStorage.removeItem("addressId"),e.aid===localStorage.addressId&&localStorage.removeItem("addressId")),c.a.info("\u5220\u9664\u6210\u529f!",1.5,(function(){e.props.history.goBack()})))}))}}])}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:y.a.page},p.a.createElement(C.a,{title:"\u4fee\u6539\u6536\u8d27\u5730\u5740","right-text":"\u5220\u9664",onClickRightBtn:this.delData.bind(this)}),p.a.createElement("div",{className:y.a.main},p.a.createElement("ul",null,p.a.createElement("li",null,"\u6536\u8d27\u4eba"),p.a.createElement("li",null,p.a.createElement("input",{type:"text",placeholder:"\u6536\u8d27\u4eba\u59d3\u540d",value:this.state.sName,onChange:function(t){e.setState({sName:t.target.value})}}))),p.a.createElement("ul",null,p.a.createElement("li",null,"\u8054\u7cfb\u65b9\u5f0f"),p.a.createElement("li",null,p.a.createElement("input",{type:"text",placeholder:"\u8054\u7cfb\u4eba\u624b\u673a\u53f7",value:this.state.sCellphone,onChange:function(t){e.setState({sCellphone:t.target.value})}}))),p.a.createElement("ul",null,p.a.createElement("li",null,"\u6240\u5728\u5730\u533a"),p.a.createElement("li",null,p.a.createElement(n.a,{data:g.a,title:"\u9009\u62e9\u5730\u533a",onOk:function(t){e.setState({defaultProvince:t.join(" "),sProvince:t[0],sCity:t[1],sArea:void 0!==t[2]?t[2]:""})}},p.a.createElement("input",{type:"text",placeholder:"\u8bf7\u9009\u62e9\u6536\u8d27\u5730\u5740",readOnly:!0,value:this.state.defaultProvince,className:y.a.area})))),p.a.createElement("ul",null,p.a.createElement("li",null,"\u8be6\u7ec6\u5730\u5740"),p.a.createElement("li",null,p.a.createElement("input",{type:"text",placeholder:"\u8857\u9053\u8be6\u7ec6\u5730\u5740",value:this.state.sAddress,onChange:function(t){e.setState({sAddress:t.target.value})}}))),p.a.createElement("ul",null,p.a.createElement("li",null,"\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u5730\u5740"),p.a.createElement("li",null,p.a.createElement("input",{type:"checkbox",className:y.a.checkbox,checked:this.state.bChecked,onChange:function(t){e.setState({bChecked:!e.state.bChecked})}}))),p.a.createElement("button",{type:"button",className:y.a["submit-save"],onClick:this.submitData.bind(this)},"\u4fdd\u5b58")))}}]),a}(p.a.Component);t.default=Object(f.b)((function(e){return{state:e}}))(O)}}]);
//# sourceMappingURL=41.1209a9ab.chunk.js.map