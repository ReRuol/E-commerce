(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[32],{400:function(e,t,a){e.exports=a.p+"static/media/lazyImg.639beef7.jpg"},403:function(e,t,a){var r,n=function(e,t){e instanceof Object&&(this.opts=e,this.iMaxPage=this.opts.maxPage,this.fnCallback=t,this.iOffsetBottom=this.opts.offsetBottom,this.iCurPage=this.opts.curPage,this.init())};n.prototype={init:function(){this.eventScroll()},eventScroll:function(){window.addEventListener("scroll",this.scrollBottom())},scrollBottom:function(){var e=this,t=!0;return function(){t&&(t=!1,setTimeout((function(){var a=document.documentElement.offsetHeight||document.body.offsetHeight,r=document.documentElement.scrollTop||document.body.scrollTop;a-((document.documentElement.clientHeight||document.body.clientHeight)+r)<=e.iOffsetBottom&&e.iCurPage<e.iMaxPage&&(e.iCurPage++,e.fnCallback(e.iCurPage)),t=!0}),100))}}},e.exports?e.exports=n:void 0===(r=function(){return n}.call(t,a,t,e))||(e.exports=r)},574:function(e,t,a){e.exports={"order-list":"review_order-list__3DAga","ordernum-wrap":"review_ordernum-wrap__3Nth8",ordernum:"review_ordernum__1V2Q3",status:"review_status__2_JZE","item-list":"review_item-list__1G2wJ",image:"review_image__1b1iL",title:"review_title__YsV3y",amount:"review_amount__1zl_G","status-btn":"review_status-btn__3NrOs","total-wrap":"review_total-wrap__1DzSx",total:"review_total__E6ani"}},596:function(e,t,a){"use strict";a.r(t);var r=a(52),n=a(53),i=a(55),o=a(54),s=a(1),c=a.n(s),u=a(118),l=a(574),m=a.n(l),d=a(382),f=a(403),h=a.n(f),p=a(385),g=a(7),v=function(e){Object(i.a)(s,e);var t=Object(o.a)(s);function s(e){var a;return Object(r.a)(this,s),a=t.call(this,e),Object(p.d)(e),a.state={aOrder:[]},a.oUpRefresh=null,a.curPage=1,a.maxPage=0,a.offsetBottom=100,a}return Object(n.a)(s,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){this.oUpRefresh=null,this.setState=function(e,t){}}},{key:"getData",value:function(){var e=this,t=g.a.baseUrl+"/api/user/myorder/reviewOrder?uid="+this.props.state.user.uid+"&page="+this.curPage+"&token="+g.a.token;Object(d.a)(t).then((function(t){200===t.code&&(e.maxPage=t.pageinfo.pagenum,e.setState({aOrder:t.data},(function(){Object(p.b)(),e.getScrollPage()})))}))}},{key:"getScrollPage",value:function(){var e=this;this.oUpRefresh=new h.a({curPage:this.curPage,maxPage:this.maxPage,offsetBottom:this.offsetBottom},(function(t){var a=g.a.baseUrl+"/api/user/myorder/reviewOrder?uid="+e.props.state.user.uid+"&page="+e.curPage+"&token="+g.a.token;Object(d.a)(a).then((function(t){if(200===t.code&&t.data.length>0){for(var a=e.state.aOrder,r=0;r<t.data.length;r++)a.push(t.data[r]);e.setState({aOrder:a},(function(){Object(p.b)()}))}}))}))}},{key:"pushPage",value:function(e){this.props.history.push(g.a.path+e)}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,this.state.aOrder.length>0?this.state.aOrder.map((function(t,r){return c.a.createElement("div",{key:r,className:m.a["order-list"],onClick:e.pushPage.bind(e,"order/detail?ordernum="+t.ordernum)},c.a.createElement("div",{className:m.a["ordernum-wrap"]},c.a.createElement("div",{className:m.a.ordernum},"\u8ba2\u5355\u7f16\u53f7:",t.ordernum),c.a.createElement("div",{className:m.a.status},"0"===t.status?"\u5f85\u4ed8\u6b3e":"1"===t.satus?"\u5f85\u6536\u8d27":"\u5df2\u6536\u8d27")),t.goods.length>0?t.goods.map((function(r,n){return c.a.createElement("div",{key:n,className:m.a["item-list"]},c.a.createElement("div",{className:m.a.image},c.a.createElement("img",{"data-echo":r.image,src:a(400),alt:r.title})),c.a.createElement("div",{className:m.a.title},r.title),c.a.createElement("div",{className:m.a.amount},"x",r.amount),c.a.createElement("div",{className:m.a["status-btn"],onClick:function(a){a.stopPropagation(),e.pushPage("order/add_review?gid="+r.gid+"&ordernum="+t.ordernum)}},"0"===r.isreview?"\u8bc4\u4ef7":"\u8ffd\u52a0\u8bc4\u4ef7"))})):"",c.a.createElement("div",{className:m.a["total-wrap"]},c.a.createElement("div",{className:m.a.total},"\u5b9e\u9645\u91d1\u989d\uff1a\xa5",t.total)))})):c.a.createElement("div",{className:"null-item"},"\u60a8\u8fd8\u6ca1\u6709\u76f8\u5173\u7684\u8ba2\u5355"))}}]),s}(c.a.Component);t.default=Object(u.b)((function(e){return{state:e}}))(v)}}]);
//# sourceMappingURL=32.6af4756f.chunk.js.map