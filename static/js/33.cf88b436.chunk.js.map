{"version":3,"sources":["assets/images/common/lazyImg.jpg","pages/home/goods/items.js","assets/css/home/goods/items.module.css"],"names":["module","exports","GoodsItems","props","state","aGoods","myScroll","setScrollTop","this","getData","newProps","setState","callback","cid","location","search","localParam","request","config","baseUrl","token","then","res","code","data","eventScroll","lazyImg","on","goodsContentMain","refs","addEventListener","e","preventDefault","passive","IScroll","scrollX","scrollY","pUrl","history","push","path","ref","className","Css","length","map","item","index","key","title","goods","item2","index2","onClick","pushPage","bind","gid","data-echo","image","src","require","alt","isSystem","style","width","height","React","Component"],"mappings":"oGAAAA,EAAOC,QAAU,IAA0B,qC,iMCMrBC,E,kDAClB,WAAYC,GAAO,IAAD,8BACd,cAAMA,IACDC,MAAM,CACPC,OAAO,IAEX,EAAKC,SAAS,KALA,E,gEAQdC,cACAC,KAAKC,QAAQD,KAAKL,S,uDAEWO,GAC7BF,KAAKC,QAAQC,K,6CAGbF,KAAKG,SAAS,SAACP,EAAMQ,O,8BAIjBT,GAAO,IAAD,OACNU,EAAIV,EAAMW,SAASC,OAAOC,YAAWb,EAAMW,SAASC,QAAQA,OAAOF,IAAI,GAC3EI,YAAQC,IAAOC,QAAQ,+BAA+BN,EAAI,UAAUK,IAAOE,OAAOC,MAAK,SAAAC,GACnE,MAAZA,EAAIC,KACJ,EAAKZ,SAAS,CAACN,OAAOiB,EAAIE,OAAM,WAC5B,EAAKC,cACLC,cACA,EAAKpB,SAASqB,GAAG,aAAY,WACzBD,oBAIR,EAAKf,SAAS,CAACN,OAAO,U,oCAK9B,IAAIuB,EAAiBpB,KAAKqB,KAAK,sBAC/BD,EAAiBE,iBAAiB,aAAa,SAAUC,GAAKA,EAAEC,mBAAqB,CAACC,SAAS,IAC/FzB,KAAKF,SAAU,IAAI4B,IAAQN,EAAkB,CACzCO,SAAU,EACVC,SAAU,EACVJ,gBAAiB,M,+BAGhBK,GACL7B,KAAKL,MAAMmC,QAAQC,KAAKrB,IAAOsB,KAAKH,K,+BAE/B,IAAD,OACJ,OACI,yBAAKI,IAAI,qBAAqBC,UAAWC,IAAI,uBACzC,6BAEQnC,KAAKJ,MAAMC,OAAOuC,OAAO,EACrBpC,KAAKJ,MAAMC,OAAOwC,KAAI,SAACC,EAAMC,GACzB,OACI,yBAAKL,UAAWC,IAAI,cAAeK,IAAKD,GACpC,yBAAKL,UAAWC,IAAI,kBAAmBG,EAAKG,OAC5C,yBAAKP,UAAWC,IAAI,qBAEA,MAAZG,EAAKI,MACDJ,EAAKI,MAAML,KAAI,SAACM,EAAOC,GACnB,OACI,wBAAIJ,IAAKI,EAAQC,QAAS,EAAKC,SAASC,KAAK,EAAK,0BAA0BJ,EAAMK,MAC9E,4BAAI,yBAAKC,YAAWN,EAAMO,MAAOC,IAAKC,EAAQ,KAA8CC,IAAKV,EAAMF,SACvG,4BAAKE,EAAMF,WAItB,QAOxB,yBAAKP,UAAU,aAAf,8CAGQ,IAAboB,cAAe,yBAAKC,MAAO,CAACC,MAAM,OAAOC,OAAO,YAAkB,yBAAKF,MAAO,CAACC,MAAM,OAAOC,OAAO,kB,GA/ElFC,IAAMC,Y,oBCL/CnE,EAAOC,QAAU,CAAC,qBAAqB,kCAAkC,aAAa,0BAA0B,gBAAgB,6BAA6B,mBAAmB","file":"static/js/33.cf88b436.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lazyImg.639beef7.jpg\";","import React from 'react';\r\nimport config from '../../../assets/js/conf/config.js';\r\nimport {request} from \"../../../assets/js/libs/request\";\r\nimport IScroll from '../../../assets/js/libs/iscroll.js';\r\nimport {lazyImg,localParam,isSystem,setScrollTop} from '../../../assets/js/utils/util.js';\r\nimport Css from '../../../assets/css/home/goods/items.module.css';\r\nexport default class  GoodsItems extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            aGoods:[]\r\n        }\r\n        this.myScroll=null;\r\n    }\r\n    componentDidMount(){\r\n        setScrollTop();\r\n        this.getData(this.props);\r\n    }\r\n    UNSAFE_componentWillReceiveProps(newProps){\r\n        this.getData(newProps)\r\n    }\r\n    componentWillUnmount(){\r\n        this.setState=(state,callback)=>{\r\n            return;\r\n        }\r\n    }\r\n    getData(props){\r\n        let cid=props.location.search?localParam(props.location.search).search.cid:'';\r\n        request(config.baseUrl+\"/api/home/category/show?cid=\"+cid+\"&token=\"+config.token).then(res=>{\r\n            if (res.code ===200){\r\n                this.setState({aGoods:res.data},()=>{\r\n                    this.eventScroll();\r\n                    lazyImg();\r\n                    this.myScroll.on(\"scrollEnd\",()=>{\r\n                        lazyImg();\r\n                    });\r\n                })\r\n            }else{\r\n                this.setState({aGoods:[]})\r\n            }\r\n        })\r\n    }\r\n    eventScroll(){\r\n        let goodsContentMain=this.refs['goods-content-main'];\r\n        goodsContentMain.addEventListener('touchmove', function (e) { e.preventDefault(); }, {passive: false});\r\n        this.myScroll= new IScroll(goodsContentMain, {\r\n            scrollX : false,\r\n            scrollY : true,\r\n            preventDefault : false\r\n        });\r\n    }\r\n    pushPage(pUrl){\r\n        this.props.history.push(config.path+pUrl);\r\n    }\r\n    render(){\r\n        return(\r\n            <div ref=\"goods-content-main\" className={Css['goods-content-main']}>\r\n                <div>\r\n                    {\r\n                        this.state.aGoods.length>0?\r\n                            this.state.aGoods.map((item, index)=>{\r\n                                return (\r\n                                    <div className={Css['goods-wrap']} key={index}>\r\n                                        <div className={Css['classify-name']}>{item.title}</div>\r\n                                        <div className={Css['goods-items-wrap']}>\r\n                                            {\r\n                                                item.goods!=null?\r\n                                                    item.goods.map((item2, index2)=>{\r\n                                                        return (\r\n                                                            <ul key={index2} onClick={this.pushPage.bind(this,\"goods/details/item?gid=\"+item2.gid)}>\r\n                                                                <li><img data-echo={item2.image} src={require(\"../../../assets/images/common/lazyImg.jpg\")} alt={item2.title}/></li>\r\n                                                                <li>{item2.title}</li>\r\n                                                            </ul>\r\n                                                        )\r\n                                                    })\r\n                                                    :\"\"\r\n                                            }\r\n                \r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                            :<div className=\"null-item\">没有相关商品！</div>\r\n                    }\r\n                    {\r\n                        isSystem()===1?<div style={{width:'100%',height:'2.5rem'}}></div>:<div style={{width:'100%',height:'2.2rem'}}></div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"goods-content-main\":\"items_goods-content-main__2b2uj\",\"goods-wrap\":\"items_goods-wrap__nluZ5\",\"classify-name\":\"items_classify-name__N_cLN\",\"goods-items-wrap\":\"items_goods-items-wrap__TEQiQ\"};"],"sourceRoot":""}