(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[29],{382:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(69),s=a.n(n),r=a(160),c=s.a.findDOMNode(document.getElementById("page-load"));function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get".toLocaleLowerCase(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o();var n={},s={},c="";if(t==="file".toLocaleLowerCase()){if(t="post",a instanceof Object)for(var i in c=new FormData,a)c.append(i,a[i]);n={method:t,body:c}}else if(t==="get".toLocaleLowerCase())n={method:t};else{if(s={"Content-Type":"application/x-www-form-urlencoded"},a instanceof Object){for(var u in a)c+="&".concat(u,"=").concat(encodeURIComponent(a[u]));c=c.slice(1)}n={method:t,headers:s,body:c}}return Object(r.a)(e,n).then((function(e){return l(),e.json()}))}function o(){c.style.display="block"}function l(){c.style.display="none"}},388:function(e,t,a){"use strict";var n=a(52),s=a(53),r=a(55),c=a(54),i=a(1),o=a.n(i),l=a(37),u=a(7),h=a(389),d=a.n(h),p=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"goBack",value:function(){this.props.location.pathname===u.a.path+"address/index"?this.props.history.replace(u.a.path+"balance/index"):this.props.history.goBack()}},{key:"getClick",value:function(){this.props.onClickRightBtn()}},{key:"render",value:function(){return o.a.createElement("div",{className:d.a["sub-header"]},o.a.createElement("div",{className:d.a.back,onClick:this.goBack.bind(this)}),o.a.createElement("div",{className:d.a.title},this.props.title),o.a.createElement("div",{className:""!==this.props["right-text"]?d.a["right-btn"]:"hide",onClick:this.getClick.bind(this)},this.props["right-text"]))}}]),a}(o.a.Component);t.a=Object(l.g)(p)},389:function(e,t,a){e.exports={"sub-header":"subHeader_sub-header__1pvh_",back:"subHeader_back__3K4yL",title:"subHeader_title__1gr8C","right-btn":"subHeader_right-btn__1-dOl"}},522:function(e,t,a){e.exports={page:"reg_page__u6rSl",main:"reg_main__25QUj","cellphone-wrap":"reg_cellphone-wrap__1CQPZ",cellphone:"reg_cellphone__2fceg","code-btn":"reg_code-btn__tC2iB",success:"reg_success__14kUZ","code-wrap":"reg_code-wrap__xWLZh","password-wrap":"reg_password-wrap__3siwO",password:"reg_password__2TpN1","switch-wrap":"reg_switch-wrap__SSR8x","switch-btn":"reg_switch-btn__s7cC_","sure-btn":"reg_sure-btn__3TOMD"}},580:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));a(443);var n=a(444),s=a.n(n),r=a(86),c=a.n(r),i=(a(391),a(392)),o=a.n(i),l=a(119),u=a(52),h=a(53),d=a(55),p=a(54),b=a(1),m=a.n(b),f=a(388),C=a(522),v=a.n(C),k=a(7),g=a(382),_=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={SwitchChecked:!1,sCellphone:"",bCodeSuccess:!1,sCodeText:"\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801",sCode:"",sPassword:""},n.timer=null,n.bSendCode=!0,n.bSubmit=!0,n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("title").innerHTML="\u4f1a\u5458\u6ce8\u518c"}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.setState=function(e,t){}}},{key:"checkCellphone",value:function(e){var t=this;this.setState({sCellphone:e.target.value},(function(){t.bSendCode&&(t.state.sCellphone.match(/^1[0-9][0-9]{9}$/)?t.setState({bCodeSuccess:!0}):t.setState({bCodeSuccess:!1}))}))}},{key:"getCode",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.bSendCode||!this.state.bCodeSuccess){e.next=12;break}return e.next=3,this.isSameCellphone();case 3:if(200!==(t=e.sent).code){e.next=8;break}if("1"!==t.data.isreg){e.next=8;break}return o.a.info("\u8be5\u624b\u673a\u53f7\u5df2\u6ce8\u518c",1.7),e.abrupt("return",!1);case 8:a=10,this.setState({sCodeText:"\u91cd\u65b0\u53d1\u9001"+a+"s",bCodeSuccess:!1}),this.bSendCode=!1,this.timer=setInterval((function(){a>0?(a--,n.setState({sCodeText:"\u91cd\u65b0\u53d1\u9001"+a+"s"})):(n.bSendCode=!0,clearInterval(n.timer),n.setState({sCodeText:"\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801"}),n.setState({bCodeSuccess:!0}))}),1e3);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"submitData",value:function(){var e=Object(l.a)(c.a.mark((function e(){var t,a,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.sCellphone.match(/^\s*$/)){e.next=5;break}return o.a.info("\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",1.7),e.abrupt("return",!1);case 5:if(this.state.sCellphone.match(/^1[0-9][0-9]{9}/)){e.next=8;break}return o.a.info("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7",1.7),e.abrupt("return",!1);case 8:return e.next=10,this.isSameCellphone();case 10:if(200!==(t=e.sent).code){e.next=15;break}if("1"!==t.data.isreg){e.next=15;break}return o.a.info("\u8be5\u624b\u673a\u53f7\u5df2\u6ce8\u518c",1.7),e.abrupt("return",!1);case 15:if(!this.state.sCode.match(/^\s*$/)){e.next=20;break}return o.a.info("\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801",1.7),e.abrupt("return",!1);case 20:if(!this.state.sPassword.match(/^\s*$/)){e.next=23;break}return o.a.info("\u8bf7\u8f93\u5165\u5bc6\u7801",1.7),e.abrupt("return",!1);case 23:a=k.a.baseUrl+"api/home/user/reg?token="+k.a.token,this.bSubmit&&(this.bSubmit=!1,Object(g.a)(a,"post",{vcode:this.state.sCode,cellphone:this.state.sCellphone,password:this.state.sPassword}).then((function(e){200===e.code&&n.props.history.goBack()})));case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isSameCellphone",value:function(){var e=k.a.baseUrl+"api/home/user/isreg?token="+k.a.token;return Object(g.a)(e,"post",{username:this.state.sCellphone}).then((function(e){return e}))}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:v.a.page},m.a.createElement(f.a,{title:"\u4f1a\u5458\u6ce8\u518c"}),m.a.createElement("div",{className:v.a.main},m.a.createElement("div",{className:v.a["cellphone-wrap"]},m.a.createElement("div",{className:v.a.cellphone},m.a.createElement("input",{type:"tel",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7",onChange:function(t){e.checkCellphone(t)}})),m.a.createElement("div",{className:this.state.bCodeSuccess?v.a["code-btn"]+" "+v.a.success:v.a["code-btn"],onClick:this.getCode.bind(this)},this.state.sCodeText)),m.a.createElement("div",{className:v.a["code-wrap"]},m.a.createElement("input",{type:"tel",placeholder:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801",onChange:function(t){e.setState({sCode:t.target.value})}})),m.a.createElement("div",{className:v.a["password-wrap"]},m.a.createElement("div",{className:v.a.password},m.a.createElement("form",null,m.a.createElement("input",{type:this.state.SwitchChecked?"text":"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",autoComplete:"tel",onChange:function(t){e.setState({sPassword:t.target.value})}}))),m.a.createElement("div",{className:v.a["switch-wrap"]},m.a.createElement(s.a,{checked:this.state.SwitchChecked,onChange:function(){e.setState({SwitchChecked:!e.state.SwitchChecked})}}))),m.a.createElement("div",{className:v.a["sure-btn"],onClick:this.submitData.bind(this)},"\u6ce8\u518c")))}}]),a}(m.a.Component)}}]);
//# sourceMappingURL=29.adce9e2a.chunk.js.map