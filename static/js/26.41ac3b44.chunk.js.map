{"version":3,"sources":["assets/js/libs/request.js","actions/hkaction.js","actions/cartaction.js","actions/useraction.js","actions/index.js","components/header/subHeader.js","components/header/subHeader.module.css","assets/css/home/login/index.module.css","assets/images/home/index/forget.png","assets/images/home/index/reg.png","pages/home/login/index.js"],"names":["oLoad","ReactDOM","findDOMNode","document","getElementById","request","pUrl","pType","toLocaleLowerCase","data","showLoad","config","headers","params","Object","key","FormData","append","method","body","encodeURIComponent","slice","fetch","then","res","hideLoad","json","style","display","addHistoryKeywords","type","addCart","delItem","checkItem","setAllChecked","incAmount","decAmount","changeAmount","clearCart","login","outLogin","hk","historykeywords","cart","cartaction","user","useraction","SubHeader","this","props","location","pathname","path","history","replace","goBack","className","Css","onClick","bind","title","getClick","React","Component","withRouter","module","exports","LoginIndex","state","SwitchChecked","sCellphone","sPassword","bSubmit","innerHTML","setState","callback","url","push","match","info","isSameCellphone","resData","code","isreg","sUrl","baseUrl","token","cellphone","password","localStorage","uid","nickname","auth_token","dispatch","action","authToken","isLogin","username","placeholder","onChange","e","target","value","autoComplete","color","checked","submitData","src","require","alt","pushPage","connect"],"mappings":"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","file":"static/js/26.41ac3b44.chunk.js","sourcesContent":["import ReactDOM from 'react-dom';\nimport {fetch} from 'whatwg-fetch';\nlet oLoad=ReactDOM.findDOMNode(document.getElementById(\"page-load\"));\nfunction request(pUrl,pType='get'.toLocaleLowerCase(),data={}){\n    showLoad();\n    let config={},headers={},params='';\n    if(pType===\"file\".toLocaleLowerCase()){\n        pType=\"post\";\n        if(data instanceof Object){\n            params=new FormData();\n            for(let key in data){\n                params.append(key,data[key]);\n            }\n        }\n        config={\n            method:pType,\n            body:params\n        }\n    }\n    else if (pType ===\"get\".toLocaleLowerCase()){\n        config = {\n            method: pType\n        }\n    }else{\n        headers = {\n            'Content-Type':'application/x-www-form-urlencoded'\n        }\n        if (data instanceof Object){\n            for (let key in data){\n                params+=`&${key}=${encodeURIComponent(data[key])}`;\n            }\n            params = params.slice(1)\n        }\n        config = {\n            method: pType,\n            headers,\n            body:params\n        }\n    }\n    return fetch(pUrl,config).then(res=> {\n            hideLoad();\n            return res.json();\n        }\n    );\n}\nfunction showLoad(){\n    oLoad.style.display=\"block\";\n}\nfunction hideLoad(){\n    oLoad.style.display=\"none\";\n}\nexport {\n    request\n};","function addHistoryKeywords(data){\n    return {\n        type:\"addHk\",\n        data:data\n    }\n}\nexport{\n    addHistoryKeywords\n}","//添加购物车商品\nfunction addCart(data){\n    return {\n        type:\"addCart\",\n        data:data,\n    }\n}\n\n//删除购物车商品\nfunction delItem(data){\n    return {\n        type:\"delItem\",\n        data:data,\n    }\n}\n\n//选择购物车商品\nfunction checkItem(data){\n    return {\n        type:\"checkItem\",\n        data:data,\n    }\n}\n\n//全选购物车商品\nfunction setAllChecked(data){\n    return {\n        type:\"allItem\",\n        data:data,\n    }\n}\n\n//增加购物车商品数量\nfunction incAmount(data){\n    return {\n        type:\"incAmount\",\n        data:data,\n    }\n}\n\n//减少购物车商品数量\nfunction decAmount(data){\n    return {\n        type:\"decAmount\",\n        data:data,\n    }\n}\n\n//改变数量\nfunction changeAmount(data){\n    return {\n        type:\"changeAmount\",\n        data:data,\n    }\n}\n\n//清空购物车\nfunction clearCart(data){\n    return {\n        type:\"clearCart\",\n        data:data,\n    }\n}\nexport{\n    addCart,\n    delItem,\n    checkItem,\n    setAllChecked,\n    incAmount,\n    decAmount,\n    changeAmount,\n    clearCart,\n}","//会员登录\nfunction login(data){\n    return {\n        type:\"login\",\n        data:data\n    }\n}\n\n//退出会员\nfunction outLogin(){\n    return {\n        type:\"outLogin\",\n        data:{}\n    }\n}\nexport{\n    login,\n    outLogin,\n}","import * as historykeywords from './hkaction.js';\nimport * as cartaction from './cartaction.js';\nimport * as useraction from './useraction.js';\nexport default {\n    hk:historykeywords,\n    cart:cartaction,\n    user:useraction,\n}","import React from 'react';\r\nimport {withRouter} from \"react-router\";\r\nimport config from '../../assets/js/conf/config';\r\nimport Css from './subHeader.module.css';\r\nclass  SubHeader extends React.Component{\r\n    componentDidMount(){\r\n   \r\n    }\r\n    goBack(){\r\n        if(this.props.location.pathname===config.path+\"address/index\"){\r\n            this.props.history.replace(config.path+\"balance/index\")\r\n        }else{\r\n            this.props.history.goBack();\r\n        }\r\n    }\r\n\r\n    //获取父组件的点击事件\r\n    getClick(){\r\n        this.props['onClickRightBtn']();\r\n    }   \r\n    render(){\r\n        return(\r\n            <div className={Css['sub-header']}>\r\n                <div className={Css[\"back\"]}  \r\n                    onClick={this.goBack.bind(this)}>\r\n                </div>\r\n                <div className={Css[\"title\"]}>{this.props.title}</div>\r\n                <div className={this.props[\"right-text\"]!==\"\"?Css[\"right-btn\"]:\"hide\"} onClick={this.getClick.bind(this)}>\r\n                    {this.props['right-text']}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default withRouter(SubHeader);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sub-header\":\"subHeader_sub-header__1pvh_\",\"back\":\"subHeader_back__3K4yL\",\"title\":\"subHeader_title__1gr8C\",\"right-btn\":\"subHeader_right-btn__1-dOl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"login_page__kC9CZ\",\"main\":\"login_main__3eUln\",\"cellphone-wrap\":\"login_cellphone-wrap__2N28O\",\"password-wrap\":\"login_password-wrap__3_sNa\",\"password\":\"login_password__qsFh4\",\"switch-wrap\":\"login_switch-wrap__1eZwk\",\"sure-btn\":\"login_sure-btn__14qrD\",\"fastreg-wrap\":\"login_fastreg-wrap__5sTxZ\",\"img-wrap\":\"login_img-wrap__beW7Y\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACKElEQVRYR8WXv04VQRSHPxITQqcdHZDYK70FJPRARWGhPoH6BOATqE8glBAKEh4AAg+AiY0FRq1sjZ2JBvIlZ8ks7OzM3XvJPcnNzWZ353znd/7M7AxTtpkp+2cIwCLwGniawP8AToG9UQMaBeAh8B54CfwEjoDf4VCYdUCQTeBzLUgtgM5PgCVgI6K97UNlPgTIauaZO1y1AMqrAyNtos4FuRsQwpaeraqBlYi+NirVMgWC7JRSUaOACxl5WnSldXX8IlLW+2wNgPL7K0aTeGpUK65ffCDyaHFNDeAKeDcigOm6gHKN1SgwBMBsmAZTN7gG7HcLyf9xTAgV7ITJKWC+t2O0+qITboiZCpVwSr6K1myt0wXQVHDnC0MogDcxxh1OrWC6AIb0fQ2Xw8n9o9VNXQA1ff8MOADmw/M3YC02qb4R7ThX4RsbAqDzM+APcBgrPQdmY/K5U3aZket8bIBfwBzgzG9sAVCFL8DyfQP8A45j3099mTqrPgVL709MgRyAk88qv3eAS0DJHydF5/X3qI1WjhMJJqaAzr4CD4DziFjp/0Zt5LpgYgA6EMKe1vH/TE3cBpkoQLO4Ry4HTE72wUXooo7Pko0CoGJaa3PLjeInPf2cQm3FxX6B1M6wSz7Gybl3EjourWhPQW9LElTed38xctdunZRz27EfH58ivw6Y4vE6A9LM/ke574m+E5EvW7n+j2PWk2p2nilqjmTjOC++O3WAa7s7fiH4ZcEhAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA+0lEQVRYR+2W4Q2CMBCFPzbQDdzAuIFOopuom8gEjqBuoBPoCG6geQkYQlpKK5WY3P0hBNr77sH1XsHIUYycn78BmADzSLVuwDO0JqTANSFxO6f2WPhAugBmwB0ogUOoEs/zDbAG/6fuAlgCJ2AP7BIBtG5rAKaAKQBMfYfSr9pwBZxdrWwApoApEPIDr8Y01GTTfd+op6imYVIbKlETICa51qq4ehwPAuCqXFZN4bNeWQFkWI4VgCqU9WpHVoB6cyX1uaasAJJf57uuUuORSwEZ0m9MqYxp0jRUQUPY8kulkLN9Q+dAc5Fkjg11h+vn/OwTAxCbvNf7BvAGJoBjIRa5KqsAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport action from '../../../actions';\r\nimport {connect} from \"react-redux\";\r\nimport SubHeaderComponent from \"../../../components/header/subHeader\";\r\nimport Css from \"../../../assets/css/home/login/index.module.css\";\r\nimport {Switch,Toast} from \"antd-mobile\";\r\nimport config from '../../../assets/js/conf/config';\r\nimport { request } from '../../../assets/js/libs/request';\r\nclass  LoginIndex extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            SwitchChecked:false,\r\n            sCellphone:\"\",\r\n            sPassword:\"\",\r\n        }\r\n        this.bSubmit=true;\r\n    }\r\n    componentDidMount(){\r\n        document.getElementById('title').innerHTML=\"会员登录\"\r\n    }\r\n    componentWillUnmount(){\r\n        this.setState=(state,callback)=>{\r\n            return;\r\n        }\r\n    }\r\n\r\n    //跳转页面\r\n    pushPage(url){\r\n        this.props.history.push(config.path+url)\r\n    }\r\n\r\n    //点击登录按钮提交数据\r\n    async submitData(){\r\n        if(this.state.sCellphone.match(/^\\s*$/)){\r\n            Toast.info(\"请输入您的手机号\",1.7);\r\n            return false;\r\n        }else if(!this.state.sCellphone.match(/^1[0-9][0-9]{9}/)){\r\n            Toast.info(\"请输入正确的手机号\",1.7);\r\n            return false;\r\n        }\r\n        let resData=await this.isSameCellphone();\r\n        if(resData.code===200){\r\n            if(resData.data.isreg===\"0\"){\r\n                Toast.info(\"该手机号未注册,请先注册再登录\",1.7);\r\n                return false;\r\n            }\r\n        }\r\n        if(this.state.sPassword.match(/^\\s*$/)){\r\n            Toast.info(\"请输入密码\",1.7);\r\n            return false;\r\n        }\r\n        let sUrl=config.baseUrl+\"api/home/user/pwdlogin?token=\"+config.token;\r\n        if(this.bSubmit){\r\n            this.bSubmit=false;\r\n            request(sUrl,\"post\",{cellphone:this.state.sCellphone,password:this.state.sPassword}).then(res=>{\r\n                \r\n                if(res.code===200){\r\n                    localStorage['uid']=res.data.uid;\r\n                    localStorage['nickName']=res.data.nickname;\r\n                    localStorage['authToken']=res.data.auth_token;\r\n                    localStorage['isLogin']=true;\r\n                    this.props.dispatch(action.user.login({uid:res.data.uid,nickname:res.data.nickname,\r\n                        authToken:res.data.auth_token,isLogin:true}));\r\n                    this.props.history.goBack();\r\n                }else{\r\n                    Toast.info(res.data,1.7,()=>{\r\n                        this.bSubmit=true;\r\n                    })\r\n                }\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n    //检测手机号是否注册过\r\n    isSameCellphone(){\r\n        let sUrl=config.baseUrl+\"api/home/user/isreg?token=\"+config.token;\r\n        return request(sUrl,\"post\",{username:this.state.sCellphone}).then(res=>{\r\n            return res;\r\n        });\r\n    }\r\n    render(){\r\n        return(\r\n            <div className={Css['page']}>  \r\n                <SubHeaderComponent title=\"会员登录\"></SubHeaderComponent>\r\n                <div className={Css[\"main\"]}>\r\n                    <div className={Css[\"cellphone-wrap\"]}>\r\n                        <input type=\"tel\" placeholder=\"请输入手机号\" onChange={(e)=>{\r\n                            this.setState({sCellphone:e.target.value})\r\n                        }}/>\r\n                    </div>\r\n                    <div className={Css[\"password-wrap\"]}>\r\n                        <div className={Css[\"password\"]}>\r\n                            <form >\r\n                                <input type={this.state.SwitchChecked?\"text\":\"password\"} placeholder=\"请输入密码\" autoComplete='tel' onChange={(e)=>{\r\n                                    this.setState({sPassword:e.target.value})\r\n                                }}/>\r\n                            </form>\r\n                        </div>\r\n                        <div className={Css[\"switch-wrap\"]}>\r\n                            <Switch color=\"#eb1625\" checked={this.state.SwitchChecked} onChange={()=>{\r\n                                this.setState({SwitchChecked:!this.state.SwitchChecked})\r\n                            }}></Switch>\r\n                        </div>\r\n                    </div>\r\n                    <div className={Css[\"sure-btn\"]} onClick={this.submitData.bind(this)}>登录</div>\r\n                    <div className={Css[\"fastreg-wrap\"]}>\r\n                        <div className={Css['img-wrap']}>\r\n                            <img src={require(\"../../../assets/images/home/index/forget.png\" )}alt=\"忘记密码\"/>忘记密码\r\n                        </div>\r\n                        <div className={Css['img-wrap']} onClick={this.pushPage.bind(this,\"reg/index\")}>\r\n                            <img src={require(\"../../../assets/images/home/index/reg.png\" )}alt=\"快速注册\"/>快速注册\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default connect((state)=>{\r\n    return {\r\n        state:state\r\n    }\r\n})(LoginIndex)"],"sourceRoot":""}