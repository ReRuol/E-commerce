(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[30],{400:function(e,t,a){e.exports=a.p+"static/media/lazyImg.639beef7.jpg"},403:function(e,t,a){var i,n=function(e,t){e instanceof Object&&(this.opts=e,this.iMaxPage=this.opts.maxPage,this.fnCallback=t,this.iOffsetBottom=this.opts.offsetBottom,this.iCurPage=this.opts.curPage,this.init())};n.prototype={init:function(){this.eventScroll()},eventScroll:function(){window.addEventListener("scroll",this.scrollBottom())},scrollBottom:function(){var e=this,t=!0;return function(){t&&(t=!1,setTimeout((function(){var a=document.documentElement.offsetHeight||document.body.offsetHeight,i=document.documentElement.scrollTop||document.body.scrollTop;a-((document.documentElement.clientHeight||document.body.clientHeight)+i)<=e.iOffsetBottom&&e.iCurPage<e.iMaxPage&&(e.iCurPage++,e.fnCallback(e.iCurPage)),t=!0}),100))}}},e.exports?e.exports=n:void 0===(i=function(){return n}.call(t,a,t,e))||(e.exports=i)},571:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g}));var i=a(52),n=a(53),s=a(55),o=a(54),c=a(1),r=a.n(c),l=a(7),u=a(382),m=a(386),v=a(572),f=a.n(v),d=a(403),h=a.n(d),g=function(e){Object(s.a)(c,e);var t=Object(o.a)(c);function c(e){var a;return Object(i.a)(this,c),(a=t.call(this,e)).state={aReviews:[],iReviewTotal:0,gid:""!==e.location.search?Object(m.b)(e.location.search).search.gid:""},a.oUpRefresh=null,a.curPage=1,a.maxPage=0,a.offsetBottom=100,a}return Object(n.a)(c,[{key:"componentDidMount",value:function(){this.getReviews()}},{key:"UNSAFE_componentWillReceiveProps",value:function(){}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"getReviews",value:function(){var e=this,t=l.a.baseUrl+"/api/home/reviews/index?gid="+this.state.gid+"&token="+l.a.token+"&page=1";Object(u.a)(t).then((function(t){200===t.code?(e.setState({aReviews:t.data,iReviewTotal:t.pageinfo.total},(function(){Object(m.a)()})),e.maxPage=t.pageinfo.pagenum,e.getScrollPage()):e.setState({aReviews:[]})}))}},{key:"getScrollPage",value:function(){var e=this;this.oUpRefresh=new h.a({curPage:this.curPage,maxPage:this.maxPage,offsetBottom:this.offsetBottom},(function(t){var a=l.a.baseUrl+"/api/home/reviews/index?gid="+e.state.gid+"&token="+l.a.token+"&page="+e.curPage;Object(u.a)(a).then((function(t){if(200===t.code&&t.data.length>0){for(var a=e.state.aReviews,i=0;i<t.data.length;i++)a.push(t.data[i]);e.setState({aReviews:a},(function(){Object(m.a)()}))}}))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:f.a.page},r.a.createElement("div",{className:f.a["reviews-main"]},r.a.createElement("div",{className:f.a["reviews-title"]},"\u5546\u54c1\u8bc4\u4ef7(",this.state.iReviewTotal,")"),r.a.createElement("div",{className:f.a["reviews-wrap"]},this.state.aReviews.length>0?this.state.aReviews.map((function(e,t){return r.a.createElement("div",{key:t,className:f.a["reviews-list"]},r.a.createElement("div",{className:f.a.uinfo},r.a.createElement("div",{className:f.a.head},r.a.createElement("img",{alt:e.nickname,"data-echo":e.head,src:a(400)})),r.a.createElement("div",{className:f.a.nickname},e.nickname)),r.a.createElement("div",{className:f.a["reviews-content"]},e.content),r.a.createElement("div",{className:f.a["reviews-date"]},e.times))})):r.a.createElement("div",{className:"null-item"},"\u6ca1\u6709\u76f8\u5173\u8bc4\u4ef7\uff01")))))}}]),c}(r.a.Component)},572:function(e,t,a){e.exports={page:"_2DiAwnaG3KXP4BSRavvOtv","reviews-main":"_1CG_rIqSZ24_rc_Hw99x3i","reviews-title":"_2TXAVp-W24gpU_pGhg7IhJ","reviews-wrap":"_1umTLXa8kgv0n6bo1AASYv","reviews-list":"_2xpD_8rWtuzTGK0PesAQ-4",uinfo:"_2OapEDwCbI1Q4RHj3tJCpz",head:"_2ZFuIOuKjOoLqva7-2FBqP",nickname:"j9K4s2VbwI7K1ACDyGYCz","reviews-content":"_13Dt5f_Jm56OXyg8VC5G6e","reviews-date":"_2ZJZyS_qmIGh7ToOqjkkv1","reviews-more":"p8IQWADpv3qtypNU4QBil"}}}]);
//# sourceMappingURL=30.734d6248.chunk.js.map